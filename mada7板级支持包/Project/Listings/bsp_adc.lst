C51 COMPILER V9.60.0.0   BSP_ADC                                                           08/13/2021 21:15:40 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE BSP_ADC
OBJECT MODULE PLACED IN .\Objects\bsp_adc.obj
COMPILER INVOKED BY: E:\KEILMDK\MDK5\C51\BIN\C51.EXE ..\Libraries\FWlib\src\bsp_adc.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..
                    -\Libraries\CMSIS\startup;..\Libraries\CMSIS;..\Libraries\FWlib\src;..\Libraries\FWlib\inc;..\Libraries\FWlib;..\User) DE
                    -BUG OBJECTEXTEND PRINT(.\Listings\bsp_adc.lst) TABS(2) OBJECT(.\Objects\bsp_adc.obj)

line level    source

   1          #include "bsp_adc.h"
   2          
   3          #if BSP_ADC
              
              void ADC_Init(unsigned char Channel,unsigned char Speed)
              {
                P1ASF=Channel;
              //  ADC_CONTR=((0x80|Speed)|CHS);
              //  P1ASF=0xFF;
                ADC_CONTR=0x80;
                delay_ms(1);
                ADC_CONTR=((0x88|Speed));
                delay_ms(1);
                CLK_DIV|=0x20;
              }
              void ADC_Start(void)
              {
                  ADC_CONTR|=0x08;
              }
              void ADC_Close(void)
              {
                  ADC_CONTR&=0xF7;
              }
              void Get_ADC_Value(unsigned short *ADC_value,unsigned char CHS)
              {
                ADC_CONTR=((0x88|Speed_verylow)|CHS);
                delay_ms(1);
                *ADC_value=(ADC_RES<<8|ADC_RESL);
              
              }
              void Get_ADC_Voltage(float *ADC_voltage,unsigned char CHS)
              {
                unsigned short ADC_value;
                Get_ADC_Value(&ADC_value,CHS);
                *ADC_voltage=(ADC_value/1024.0)*5;
              }
              
              
              #endif
  40          
  41          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
